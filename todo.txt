
// todo: dim king of player that has no rook on board






split game logic of process file into separate functions in game logic



on client, grey out cards that cost more mana than you currently have; flash mana when you click card that's too 
    costly; (server prevents selection of too costly cards)

heroku: .play() is triggering exceptions? is it failing to play?

communal cards? deck building?
in deck builds, players choose a few high cost cards to start in their hand 
    (so player's can better plan around high impact end game cards)
    or perhaps card draw always gives players one card of their current max mana? or max mana minus 1 or 2?

perhaps vassals should be tankiest so using them as shields is not so discouraged




protection against bad behaving clients (flooding with messages)
    rate limit, cut off client if it exceeds threshold



pawns buff up between rounds (increase HP by 5?)

what to do about your own pawns in the way? include 'pawn sacrafice' card in stock hand to kill own pawn?
    -- give enemy incentive to attack? discourage stalling strategies?
    -- in round 5 and after, if 3 rounds pass without any hits on either king; side with lowest hp king loses

total time clock that forfeits if it expires?









escalation:

    perhaps every round you can permanently mark an enemy square out of bounds, or curse the square (does dmg to occupant)
    (maybe even choose your own square, which could be useful if cursed squares block attacks)


    pawns should have more hp, do a bit more damage? pawns should be harder to kill (otherwise 
    the board has too little continuity from round to round)


    some cards might be too powerful if cast after vassal placement, some too powerful if cast before?

    player must pick cards they will play for that round at start of round, or after king placement 
        (and opponent sees the cards)
        -take turns picking the cards?


card ideas:


    King Nuke: your own king does half damage to all units in 2 space radius

        (perhaps can choose to also use on enemy king such that enemy king damages all units in 2 space radius)


    heal

    stun vassal - make vassal sit out next round, only works if vassal takes damage at end of this round

    toggle pawn - move an allied or enemy pawn from first row to second or second to first 
        (cannot be cast on pawn that is blocked)

    wrapped targeting - a piece modified such that attacks wrap around board like pacman 
        (but also becomes vulnerable to wrapped attacks?)

    poison square - in next round, a square will damage occupied unit (lasts multiple rounds?)

    poison row - in next round, all squares in a row will damage occupied unit

    transparency - cast on enemy unit: this round, all rook and bishop attacks will penetrate 
        one square beyond this unit


    block square/row - temporarily or permanently block square from occupation (does it block attacks or do theyy go through?)





    reclaim vassal  - move vassal from the board back into your hand

    court jester - distracts? just used as a blocking piece?

    reclaim pawn - remove pawn from the board (if a mutated pawn, puts card back into your hand?)

    secondary bishop, rook, knight cards   (cost mana and only last for the round? or persist?)

    shift pawn - move pawn (ally or enemy) to random other column without a pawn

    armour - apply to unit to protect it this round from damage

    block pawn spawn in column - prevents auto spawn of pawn in column for next two rounds

    poison unit - takes damage every 

    amplify - cast on enemy - doubles all damage taken this round

    mana supress - decrease enemies mana pool by N (permanently? just this round? a few rounds?)

    force combat - ends the round, skipping to combat

    resurect - resurect a dead vassal (full health / half health?) [probably a high cost card]

    invade - open the enemy's front row for placing your pieces in this round

    attack buff - temp or permanent increase a piece's attack
    hp buff - temp or permanent increase a piece's hp (potentially above their starting max)

    draw cards - draw two cards

    heal all pawns - restoration applied after combat?

    ricochet - select your vassal - attack on target is transmitted from teh target in same pattern, e.g. bishop hits   enemy and so bishop's diagonal attack emanates in all 4 diagonals from that enemy

    nullify - selected unit remains on board but takes no damage and inflicts no damage this round

    aoe - curse unit for 1 turn: damage applied to unit hits all neighbor spaces (for half?) 

    long pawn - restore pawn to max health and extend its attack range to two spaces 

    shove - move a unit back one row (when cast on ally, moves towards your own back row)

    chain attack - buff on ally or curse on enemy? attack on unit spreads recursively through all cardinally            contiguous pieces (maybe transmits through diagonals too?)

    swap rows - swap ally/enemy back row with middle row

    disable column - prevent placement in column for this round?

    advance - move all pawns in middle row to front row

    lock cards - lock 2 random, non-vassal cards in the enemy's hand for two rounds

    body double - plant a king with 50% change to swap places with real king (opponent can't see which is real); false king lasts only for the round; false king does no damage

    shitty bishop - a smaller, weaker bishop that has range of 3 and half attack/hp

    long knight - a smaller, weaker knight that has range of 3 instead of 2 and half attack/hp

    shitty rook - a smaller, weaker rook that has range of 3 and half attack/hp

    restore mana - restore your mana to max

    fog of war - mist covers a row, making all attacks on and from that row have a 50% chance of missing

    summon pawns - summon up to two pawns (cannot exceed the standard max of 5)

    pawn - place a pawn in a free pawn position (get to choose precise square); cannot exceed the max of 5 pawns    

    friendly fire - enemy piece hits allies as well as enemies this rounds

    mimic bishop - knight or rook adopts bishop attack pattern for this and next 2 rounds

    force reclaim - reclaim the piece you played in last turn, or force enemy to reclaim the piece they played in     
        last turn; the reclaimed piece cannot be used again this round

    hp aura - buff hp of all adjacent pieces (including enemies?)
    attack aura - buff attack " " " " "

    time bomb - convert a pawn (enemy or allied) into a bomb: the bomb has 20hp and no attack, after 3 rounds, it   
        detonates, hitting everything adjacent for big damage (the bomb counts as a pawn for spawning purposes)

cards that can only be cast on enemies in line of attack
    - in some cases, require line of attack from specific vassal, e.g. can only cast on enemy threatened by bishop

cards that can be cast on an enemy but doesn't take effect unless it takes damage at end of round